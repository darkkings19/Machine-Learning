<div class="playground-container">
  <!-- Header del playground -->
  <div class="playground-header">
    <div class="header-info">
      <h2 class="heading-3">ğŸ§ª Playground Python - Ãrboles de DecisiÃ³n</h2>
      <p class="section-description">
        Editor de cÃ³digo interactivo con <strong>WebAssembly</strong> para experimentar con Ã¡rboles de decisiÃ³n en tiempo real.
      </p>
      <div *ngIf="selectedExample && exampleInfo[selectedExample]" class="current-example">
        <span class="example-badge">{{ exampleInfo[selectedExample].title }}</span>
        <span class="example-description">{{ exampleInfo[selectedExample].description }}</span>
      </div>
    </div>
    <div class="playground-status">
      <div class="status-indicator" [class.ready]="isReady" [class.loading]="isLoading">
        <span class="status-dot"></span>
        <span class="status-text">{{ statusText }}</span>
      </div>
    </div>
  </div>

  <!-- Layout del editor -->
  <div class="editor-layout">
    <!-- Panel izquierdo: Editor -->
    <div class="editor-panel">
      <div class="panel-header">
        <h3>ğŸ“ Editor de CÃ³digo</h3>
        <div class="editor-controls">
          <button
            class="btn btn-sm"
            (click)="loadExample()"
            [disabled]="!isReady"
            title="Cargar ejemplo">
            ğŸ“ Ejemplo
          </button>
          <button
            class="btn btn-sm"
            (click)="clearEditor()"
            [disabled]="!isReady"
            title="Limpiar editor">
            ğŸ—‘ï¸ Limpiar
          </button>
          <button
            class="btn btn-sm"
            (click)="formatCode()"
            [disabled]="!isReady"
            title="Formatear cÃ³digo">
            âœ¨ Formatear
          </button>
        </div>
      </div>

      <!-- Contenedor del editor Monaco -->
      <div class="editor-container">
        <div #editorContainer class="monaco-editor-container"></div>
      </div>

      <!-- BotÃ³n de ejecuciÃ³n -->
      <div class="execution-controls">
        <button
          class="btn btn-primary btn-lg"
          (click)="runCode()"
          [disabled]="!isReady || isExecuting"
          [class.loading]="isExecuting">
          <span *ngIf="!isExecuting">ğŸš€ Ejecutar CÃ³digo</span>
          <span *ngIf="isExecuting">
            <span class="loading-spinner"></span>
            Ejecutando...
          </span>
        </button>
      </div>
    </div>

    <!-- Panel derecho: Resultados -->
    <div class="results-panel">
      <div class="panel-header">
        <h3>ğŸ“Š Resultados</h3>
        <div class="results-controls">
          <button
            class="btn btn-sm"
            (click)="clearResults()"
            [disabled]="!hasResults"
            title="Limpiar resultados">
            ğŸ§¹ Limpiar
          </button>
        </div>
      </div>

      <!-- Ãrea de resultados -->
      <div class="results-container">
        <div
          class="results-content"
          [class.empty]="!hasResults"
          [class.error]="hasError">

          <!-- Estado inicial -->
          <div *ngIf="!hasResults && !isExecuting" class="empty-state">
            <div class="empty-icon">ğŸ¯</div>
            <h4>Â¡Ejecuta tu cÃ³digo!</h4>
            <p>Los resultados aparecerÃ¡n aquÃ­ despuÃ©s de ejecutar el cÃ³digo Python.</p>
          </div>

          <!-- Resultados exitosos -->
          <div *ngIf="hasResults && !hasError" class="success-results">
            <div class="output-section">
              <h5>âœ… Salida del programa:</h5>
              <pre class="output-content">{{ executionOutput }}</pre>
            </div>
          </div>

          <!-- Errores -->
          <div *ngIf="hasError" class="error-results">
            <div class="error-section">
              <h5>âŒ Error en la ejecuciÃ³n:</h5>
              <pre class="error-content">{{ executionError }}</pre>
            </div>
            <div *ngIf="executionOutput" class="output-section">
              <h5>ğŸ“ Salida parcial:</h5>
              <pre class="output-content">{{ executionOutput }}</pre>
            </div>
          </div>

          <!-- Indicador de carga -->
          <div *ngIf="isExecuting" class="loading-results">
            <div class="loading-animation">
              <div class="loading-spinner"></div>
              <p>Ejecutando cÃ³digo Python...</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- SecciÃ³n de ejemplos -->
  <div class="examples-section">
    <h3 class="heading-4">ğŸ’¡ Ejemplos de Ãrboles de DecisiÃ³n</h3>
    <div class="examples-grid">
      <div class="example-card" (click)="loadExample('basic')">
        <div class="example-icon">ğŸŒ³</div>
        <h4>BÃ¡sico</h4>
        <p>IntroducciÃ³n a Ã¡rboles de decisiÃ³n con dataset Iris</p>
      </div>

      <div class="example-card" (click)="loadExample('advanced')">
        <div class="example-icon">ğŸ“Š</div>
        <h4>Avanzado</h4>
        <p>AnÃ¡lisis detallado con matriz de confusiÃ³n e importancia</p>
      </div>

      <div class="example-card" (click)="loadExample('comparison')">
        <div class="example-icon">âš–ï¸</div>
        <h4>ComparaciÃ³n</h4>
        <p>Comparar Ã¡rboles con otros algoritmos de ML</p>
      </div>

      <div class="example-card" (click)="loadExample('visualization')">
        <div class="example-icon">ğŸ“ˆ</div>
        <h4>VisualizaciÃ³n</h4>
        <p>Entender las reglas de decisiÃ³n paso a paso</p>
      </div>

      <div class="example-card" (click)="loadExample('interactive')">
        <div class="example-icon">ğŸ®</div>
        <h4>Interactivo</h4>
        <p>Experimenta con diferentes ejemplos de clasificaciÃ³n</p>
      </div>
    </div>
  </div>
</div>
